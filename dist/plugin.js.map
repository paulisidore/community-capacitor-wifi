{"version":3,"file":"plugin.js","sources":["esm/index.js","esm/web.js"],"sourcesContent":["import { registerPlugin } from '@capacitor/core';\r\nconst Wifi = registerPlugin('Wifi', {\r\n    web: () => import('./web').then(m => new m.WifiWeb()),\r\n});\r\nexport * from './definitions';\r\nexport { Wifi };\r\n//# sourceMappingURL=index.js.map","import { WebPlugin } from '@capacitor/core';\r\nexport class WifiWeb extends WebPlugin {\r\n    constructor() {\r\n        super();\r\n        window.screen.orientation.addEventListener(\"change\", () => {\r\n            const type = window.screen.orientation.type;\r\n            console.log(\"Changement de l'orientation de l'Ecran: \", type);\r\n            this.notifyListeners(\"screenOrientationChange\", { type });\r\n        });\r\n    }\r\n    async getIP() {\r\n        const reponse = await this.getLocalIP().then((ipRecus) => {\r\n            return { ip: ipRecus };\r\n        }, (err) => {\r\n            console.error(\"ERR getIp pour le Web: \", err);\r\n            return { ip: \"\" };\r\n        });\r\n        return reponse;\r\n    }\r\n    async getSSID() {\r\n        return { ssid: null };\r\n    }\r\n    async connect(options) {\r\n        console.log(options);\r\n        return { ssid: null };\r\n    }\r\n    async connectPrefix(options) {\r\n        console.log(options);\r\n        return { ssid: null };\r\n    }\r\n    async disconnect() {\r\n        return;\r\n    }\r\n    /**\r\n     * Get Local IP Address\r\n     *\r\n     * @returns Promise Object\r\n     *\r\n     * getLocalIP().then((ipAddr) => {\r\n     *    console.log(ipAddr); // 192.168.0.122\r\n     * });\r\n     */\r\n    getLocalIP() {\r\n        return new Promise(function (resolve, reject) {\r\n            // NOTE: window.RTCPeerConnection is \"not a constructor\" in FF22/23\r\n            console.log(\"Recherche LocalIP avec JavaScript...\");\r\n            const RTCPeerConnection = window.RTCPeerConnection; // window.webkitRTCPeerConnection || window.mozRTCPeerConnection;\r\n            if (!RTCPeerConnection) {\r\n                reject('Your browser does not support this API');\r\n            }\r\n            const rtc = new RTCPeerConnection({ iceServers: [] });\r\n            //const addrs = {};\r\n            //let addrs[\"0.0.0.0\"] = false;\r\n            const grepSDP = (sdp) => {\r\n                //let hosts = [];\r\n                let finalIP = '';\r\n                sdp.split('\\r\\n').forEach(function (line) {\r\n                    if (~line.indexOf(\"a=candidate\")) { // http://tools.ietf.org/html/rfc4566#section-5.13\r\n                        const parts = line.split(' '), // http://tools.ietf.org/html/rfc5245#section-15.1\r\n                        addr = parts[4], type = parts[7];\r\n                        console.log(\"IP_: \", addr);\r\n                        if (type === 'host') {\r\n                            finalIP = addr;\r\n                        }\r\n                    }\r\n                    else if (~line.indexOf(\"c=\")) { // http://tools.ietf.org/html/rfc4566#section-5.7\r\n                        console.log(\"IP type2: JavaScript...\", line);\r\n                        const parts = line.split(' '), addr = parts[2];\r\n                        finalIP = addr;\r\n                    }\r\n                });\r\n                return finalIP;\r\n            };\r\n            // if (1 || window.mozRTCPeerConnection) {      // FF [and now Chrome!] needs a channel/stream to proceed\r\n            //     rtc.createDataChannel('', {reliable:false});\r\n            // };\r\n            rtc.onicecandidate = function (evt) {\r\n                console.log(\"Execution en JavaScript...\", evt);\r\n                // convert the candidate to SDP so we can run it through our general parser\r\n                // see https://twitter.com/lancestout/status/525796175425720320 for details\r\n                if (evt.candidate) {\r\n                    const addr = grepSDP(\"a=\" + evt.candidate.candidate);\r\n                    resolve(addr);\r\n                }\r\n            };\r\n            rtc.createOffer();\r\n            //rtc.createOffer();\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=web.js.map"],"names":["registerPlugin","WebPlugin"],"mappings":"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"}